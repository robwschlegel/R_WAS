<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>WASdown</title>
  <meta name="description" content="This book is built as an infomration package meant for the student workshop at #WorldAqua17">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="WASdown" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/logo_bw.png" />
  <meta property="og:description" content="This book is built as an infomration package meant for the student workshop at #WorldAqua17" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="WASdown" />
  
  <meta name="twitter:description" content="This book is built as an infomration package meant for the student workshop at #WorldAqua17" />
  <meta name="twitter:image" content="images/logo_bw.png" />

<meta name="author" content="Morgan Brand and Robert Schlegel">


<meta name="date" content="2017-06-29">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="petrol.html">
<link rel="next" href="final-words.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The use of R Rstudio and Github</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preamble</a></li>
<li class="chapter" data-level="" data-path="colophon.html"><a href="colophon.html"><i class="fa fa-check"></i>Colophon</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r-for-data-science"><i class="fa fa-check"></i><b>1.1</b> <a href="http://r4ds.had.co.nz/index.html">R for Data Science</a></a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.1.1</b> R</a></li>
<li class="chapter" data-level="1.1.2" data-path="intro.html"><a href="intro.html#rstudio"><i class="fa fa-check"></i><b>1.1.2</b> RStudio</a></li>
<li class="chapter" data-level="1.1.3" data-path="intro.html"><a href="intro.html#the-tidyverse"><i class="fa fa-check"></i><b>1.1.3</b> The tidyverse</a></li>
<li class="chapter" data-level="1.1.4" data-path="intro.html"><a href="intro.html#r-markdown"><i class="fa fa-check"></i><b>1.1.4</b> R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#thesisdown"><i class="fa fa-check"></i><b>1.2</b> <a href="https://github.com/ismayc/thesisdown">Thesisdown</a></a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#the-basic-filing-structure"><i class="fa fa-check"></i><b>1.2.1</b> The basic filing structure</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#pdf-output"><i class="fa fa-check"></i><b>1.2.2</b> PDF output</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#yaml"><i class="fa fa-check"></i><b>1.2.3</b> YAML</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#blogdown"><i class="fa fa-check"></i><b>1.3</b> <a href="https://github.com/rstudio/blogdown">Blogdown</a></a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#git-and-github"><i class="fa fa-check"></i><b>1.4</b> Git and Github</a><ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#why-git"><i class="fa fa-check"></i><b>1.4.1</b> Why Git?</a></li>
<li class="chapter" data-level="1.4.2" data-path="intro.html"><a href="intro.html#why-github"><i class="fa fa-check"></i><b>1.4.2</b> Why GitHub?</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#twitterverse"><i class="fa fa-check"></i><b>1.5</b> Twitterverse</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="petrol.html"><a href="petrol.html"><i class="fa fa-check"></i><b>2</b> Petrol</a><ul>
<li class="chapter" data-level="2.1" data-path="petrol.html"><a href="petrol.html#loading-and-prepping-the-data"><i class="fa fa-check"></i><b>2.1</b> Loading and prepping the data</a></li>
<li class="chapter" data-level="2.2" data-path="petrol.html"><a href="petrol.html#distances-traveled"><i class="fa fa-check"></i><b>2.2</b> Distances traveled</a></li>
<li class="chapter" data-level="2.3" data-path="petrol.html"><a href="petrol.html#spending-behaviour"><i class="fa fa-check"></i><b>2.3</b> Spending behaviour</a></li>
<li class="chapter" data-level="2.4" data-path="petrol.html"><a href="petrol.html#petrol-usage-per-km"><i class="fa fa-check"></i><b>2.4</b> Petrol usage per km</a></li>
<li class="chapter" data-level="2.5" data-path="petrol.html"><a href="petrol.html#petrol-prices"><i class="fa fa-check"></i><b>2.5</b> Petrol prices</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="bananas.html"><a href="bananas.html"><i class="fa fa-check"></i><b>3</b> Bananas</a><ul>
<li class="chapter" data-level="3.1" data-path="bananas.html"><a href="bananas.html#loading-the-data"><i class="fa fa-check"></i><b>3.1</b> Loading the data</a><ul>
<li class="chapter" data-level="3.1.1" data-path="bananas.html"><a href="bananas.html#setting-date"><i class="fa fa-check"></i><b>3.1.1</b> Setting date</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="bananas.html"><a href="bananas.html#investigating-by-bunch"><i class="fa fa-check"></i><b>3.2</b> Investigating by bunch</a><ul>
<li class="chapter" data-level="3.2.1" data-path="bananas.html"><a href="bananas.html#bunches-per-month"><i class="fa fa-check"></i><b>3.2.1</b> Bunches per month</a></li>
<li class="chapter" data-level="3.2.2" data-path="bananas.html"><a href="bananas.html#statistics"><i class="fa fa-check"></i><b>3.2.2</b> Statistics</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="bananas.html"><a href="bananas.html#investigating-by-field"><i class="fa fa-check"></i><b>3.3</b> Investigating by field</a><ul>
<li class="chapter" data-level="3.3.1" data-path="bananas.html"><a href="bananas.html#cumulative-bunches-per-field"><i class="fa fa-check"></i><b>3.3.1</b> Cumulative bunches per field</a></li>
<li class="chapter" data-level="3.3.2" data-path="bananas.html"><a href="bananas.html#cumulative-weight-per-field"><i class="fa fa-check"></i><b>3.3.2</b> Cumulative weight per field</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="bananas.html"><a href="bananas.html#production-per-hectare"><i class="fa fa-check"></i><b>3.4</b> Production per hectare</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>4</b> Final Words</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">WASdown</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="bananas" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Bananas</h1>
<p><img src="images/masheleni.png" width="75%" /></p>
<p>On my farm we have a total of 40 hectares of land. Of this 18 hectares is natural forest with 16 hectares of sugar cane and 6 hectares of bananas. Bananas grow throughout the year and from sucker to fruit is approximately 18 months. Under field management practices we are able to maintain three stages of banana trees on each spot thereby decreasing the time to fruit to six month intervals. It is recommended that every 10 years the field is to be replanted to maximize production however, these banana fields have not been replanted recently and it is our intention to investigate what this may mean for the production.</p>
<div id="loading-the-data" class="section level2">
<h2><span class="header-section-number">3.1</span> Loading the data</h2>
<p>I transcribe my raw data into Microsoft Excel from the books. For me this is the easiest way to meticulously enter data and when the data sets are not to large finding errors can be done by changing the sort and filter functions within MS Excel. Once I am ready to import data into RStudio the file is saved as a <code>.csv</code> file using the MS Excel drop down option in the save menu. Data are easiest to work with when it is in long format, i.e.. each row represents a single observation. This is not crucial because it can be transformed using R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the relevant packages for loading and manipulaiton</span>
<span class="kw">library</span>(tidyverse)

<span class="co"># Read in the data using `readr` from the `tidyverse` package</span>
production &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/Banana Production.csv&quot;</span>)

<span class="co"># A quick look to make sure the data looks like we expect</span>
<span class="kw">head</span>(production)</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##       Date Field Bunches weight
##      &lt;chr&gt; &lt;int&gt;   &lt;int&gt;  &lt;int&gt;
## 1  12/3/07   102     162    990
## 2 12/10/07   101     134   1800
## 3 12/18/07    93     115   1494
## 4 12/18/07    96      12    198
## 5 12/18/07  1011     145   1620
## 6 12/18/07   102      37    288</code></pre>
<p>Once the data are loaded and looks like the right stuff I get on to making sure my columns are set as either <code>date</code>, <code>factor</code>, or <code>number</code>. There are multiple ways to do this but I like to use <strong>lubridate</strong> <span class="citation">(Grolemund, Spinu, and Wickham <a href="#ref-R-lubridate">2016</a>)</span> when working with dates and the <strong>Tidyverse</strong> group namely <strong>dplyr</strong> <span class="citation">(Wickham et al. <a href="#ref-R-dplyr">2017</a>)</span> for creating factors.</p>
<div id="setting-date" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Setting date</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load lubridate to play with the data values</span>
<span class="kw">library</span>(lubridate)

<span class="co"># Making the date coloumn actual date values</span>
production$Date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(production$Date, <span class="st">&quot;%m/%d/%y&quot;</span>)

<span class="co"># I might want to have the month and year as unique values so I have created floor dates for each</span>
<span class="co"># Add month and year columns</span>
production$month &lt;-<span class="st"> </span><span class="kw">floor_date</span>(production$Date, <span class="st">&quot;month&quot;</span>)
production$year &lt;-<span class="st"> </span><span class="kw">floor_date</span>(production$Date, <span class="st">&quot;year&quot;</span>)</code></pre></div>
</div>
</div>
<div id="investigating-by-bunch" class="section level2">
<h2><span class="header-section-number">3.2</span> Investigating by bunch</h2>
<p>It is sometimes useful to use a standard dat or data to assign to the data you wish to work with.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Open the dat data frame from the environment panel</span>
dat &lt;-<span class="st"> </span>production %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Field =</span> <span class="kw">as.factor</span>(Field))</code></pre></div>
<div id="bunches-per-month" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Bunches per month</h3>
<p>If we were to try and plot the data for number of bunches harvested per month we can start to see that there is some kind of cyclic trend (Figure <a href="bananas.html#fig:plota">3.1</a>). On the plot I added a smooth (a model) in blue but there seems to be a problem with what it is doing. To have a look at what this problem might be I will inspect the data frame and trouble shoot</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dat)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;    &quot;Field&quot;   &quot;Bunches&quot; &quot;weight&quot;  &quot;month&quot;   &quot;year&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> dat, <span class="kw">aes</span>(<span class="dt">x =</span> month, <span class="dt">y =</span> Bunches)) +
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) +
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="dt">span =</span> <span class="fl">0.2</span>) +
<span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;3 month&quot;</span>, <span class="dt">date_labels =</span> <span class="st">&quot;%b %y&quot;</span>) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">vjust =</span> <span class="fl">0.5</span>)) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Banana bunches&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Time&quot;</span>)</code></pre></div>
<div class="figure"><span id="fig:plota"></span>
<img src="WASdown_files/figure-html/plota-1.png" alt="Bar graph showing the number of banana bunches harvested per month." width="672" />
<p class="caption">
Figure 3.1: Bar graph showing the number of banana bunches harvested per month.
</p>
</div>
<div id="problematic-smooth" class="section level4">
<h4><span class="header-section-number">3.2.1.1</span> Problematic smooth</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The str function allows you to see both the variable type and the values.</span>
<span class="kw">str</span>(dat)</code></pre></div>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    836 obs. of  6 variables:
##  $ Date   : Date, format: &quot;2007-12-03&quot; &quot;2007-12-10&quot; ...
##  $ Field  : Factor w/ 5 levels &quot;93&quot;,&quot;96&quot;,&quot;101&quot;,..: 4 3 1 2 5 4 1 2 5 3 ...
##  $ Bunches: int  162 134 115 12 145 37 95 13 96 71 ...
##  $ weight : int  990 1800 1494 198 1620 288 882 378 1008 558 ...
##  $ month  : Date, format: &quot;2007-12-01&quot; &quot;2007-12-01&quot; ...
##  $ year   : Date, format: &quot;2007-01-01&quot; &quot;2007-01-01&quot; ...</code></pre>
<p>After looking at both the <code>str</code> and the data frame the problem is that <code>Bunches</code> are not being summed by month. This is an easy fix.</p>
<p>If we want to create a summary data set to only include the sum total of banana bunches per month we can simply use <code>dplyr</code> and the pipe function. This creates a sum total for bunches.month<sup>-1</sup> and the blue line now fits the plot more appropriately (Figure <a href="bananas.html#fig:plotb">3.2</a>)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dat)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;    &quot;Field&quot;   &quot;Bunches&quot; &quot;weight&quot;  &quot;month&quot;   &quot;year&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Using dply to group the data by month and year, create a new column for the sum of bunches picked per month, then ungroup</span>
dat.sum_m &lt;-<span class="st"> </span>
<span class="st">  </span>dat %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(month, year) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">bunches.m =</span> <span class="kw">sum</span>(Bunches)) %&gt;%
<span class="st">  </span><span class="kw">ungroup</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Plotting the data</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> dat.sum_m, <span class="kw">aes</span>(<span class="dt">x =</span> month, <span class="dt">y =</span> bunches.m)) +
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) +
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="dt">span =</span> <span class="fl">0.2</span>) +
<span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;3 month&quot;</span>, <span class="dt">date_labels =</span> <span class="st">&quot;%b %y&quot;</span>) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">vjust =</span> <span class="fl">0.5</span>)) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Banana bunches&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Time&quot;</span>)</code></pre></div>
<div class="figure"><span id="fig:plotb"></span>
<img src="WASdown_files/figure-html/plotb-1.png" alt="Bar graph showing the sum of banana bunches harvested per month with a smooth fitted in blue." width="672" />
<p class="caption">
Figure 3.2: Bar graph showing the sum of banana bunches harvested per month with a smooth fitted in blue.
</p>
</div>
<p>From the trend observed in Figure <a href="bananas.html#fig:plotb">3.2</a> it seems apparent that there may be differences in the monthly output which we could look at.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># I am going to modify an existing dataframe so I will assign it to &#39;a&#39; as to not back track</span>
 a &lt;-<span class="st"> </span>dat.sum_m

<span class="co"># The month and year are going to be pulled out of the date and given their own coloumn</span>
a$y&lt;-<span class="kw">year</span>(a$year)
a$m&lt;-<span class="kw">month</span>(a$month)

<span class="co"># If I want to use the month as anything other than a date I should tell R it is a factor</span>
a1 &lt;-
<span class="st">  </span>a %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">m =</span> <span class="kw">as.factor</span>(m))</code></pre></div>
<p>Now that the data are ready to be looked at as bunches per month a simple box plot can tell a quick visual story</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># a quick boxplot for the bunches harvested per month</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> a1, <span class="kw">aes</span>(<span class="dt">x =</span> m, <span class="dt">y =</span> bunches.m)) +
<span class="st">  </span><span class="kw">geom_boxplot</span>() +
<span class="st">  </span><span class="kw">geom_jitter</span>() +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Banana bunches&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Month&quot;</span>)</code></pre></div>
<div class="figure"><span id="fig:boplot"></span>
<img src="WASdown_files/figure-html/boplot-1.png" alt="Boxplot showing the total banana bunches harvested per month." width="672" />
<p class="caption">
Figure 3.3: Boxplot showing the total banana bunches harvested per month.
</p>
</div>
</div>
</div>
<div id="statistics" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Statistics</h3>
<p>Are the number of bunches harvest per month statistically different?</p>
<p>To answer this we will run a quick one-way ANOVA</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(broom)
aov &lt;-<span class="st"> </span><span class="kw">aov</span>(bunches.m ~<span class="st"> </span>m, <span class="dt">data =</span> a1)

<span class="co"># The tidyed</span>
<span class="kw">tidy</span>(aov)</code></pre></div>
<pre><code>##        term df   sumsq    meansq statistic      p.value
## 1         m 11 3159730 287248.20  8.132671 8.659346e-10
## 2 Residuals 93 3284786  35320.28        NA           NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tidy</span>(<span class="kw">TukeyHSD</span>(aov))</code></pre></div>
<pre><code>##    term comparison    estimate   conf.low   conf.high  adj.p.value
## 1     m        2-1  125.222222 -171.81647  422.260918 9.579975e-01
## 2     m        3-1  220.000000  -77.03870  517.038696 3.634513e-01
## 3     m        4-1   12.888889 -284.14981  309.927585 1.000000e+00
## 4     m        5-1   -7.444444 -304.48314  289.594252 1.000000e+00
## 5     m        6-1 -166.555556 -463.59425  130.483141 7.682453e-01
## 6     m        7-1 -322.444444 -619.48314  -25.405748 2.153135e-02
## 7     m        8-1 -271.333333 -568.37203   25.705363 1.075045e-01
## 8     m        9-1 -244.152778 -550.33326   62.027702 2.560930e-01
## 9     m       10-1 -112.527778 -418.70826  193.652702 9.848828e-01
## 10    m       11-1 -162.777778 -468.95826  143.402702 8.231617e-01
## 11    m       12-1 -348.000000 -645.03870  -50.961304 8.554275e-03
## 12    m        3-2   94.777778 -202.26092  391.816474 9.952604e-01
## 13    m        4-2 -112.333333 -409.37203  184.705363 9.811249e-01
## 14    m        5-2 -132.666667 -429.70536  164.372029 9.376806e-01
## 15    m        6-2 -291.777778 -588.81647    5.260918 5.892033e-02
## 16    m        7-2 -447.666667 -744.70536 -150.627971 1.325711e-04
## 17    m        8-2 -396.555556 -693.59425  -99.516859 1.240745e-03
## 18    m        9-2 -369.375000 -675.55548  -63.194520 5.773603e-03
## 19    m       10-2 -237.750000 -543.93048   68.430480 2.931045e-01
## 20    m       11-2 -288.000000 -594.18048   18.180480 8.540437e-02
## 21    m       12-2 -473.222222 -770.26092 -176.183526 4.065441e-05
## 22    m        4-3 -207.111111 -504.14981   89.927585 4.582263e-01
## 23    m        5-3 -227.444444 -524.48314   69.594252 3.134050e-01
## 24    m        6-3 -386.555556 -683.59425  -89.516859 1.878265e-03
## 25    m        7-3 -542.444444 -839.48314 -245.405748 1.398298e-06
## 26    m        8-3 -491.333333 -788.37203 -194.294637 1.720851e-05
## 27    m        9-3 -464.152778 -770.33326 -157.972298 1.176102e-04
## 28    m       10-3 -332.527778 -638.70826  -26.347298 2.141590e-02
## 29    m       11-3 -382.777778 -688.95826  -76.597298 3.471610e-03
## 30    m       12-3 -568.000000 -865.03870 -270.961304 3.833872e-07
## 31    m        5-4  -20.333333 -317.37203  276.705363 1.000000e+00
## 32    m        6-4 -179.444444 -476.48314  117.594252 6.751512e-01
## 33    m        7-4 -335.333333 -632.37203  -38.294637 1.363754e-02
## 34    m        8-4 -284.222222 -581.26092   12.816474 7.409549e-02
## 35    m        9-4 -257.041667 -563.22215   49.138813 1.911989e-01
## 36    m       10-4 -125.416667 -431.59715  180.763813 9.657731e-01
## 37    m       11-4 -175.666667 -481.84715  130.513813 7.415294e-01
## 38    m       12-4 -360.888889 -657.92759  -63.850193 5.233516e-03
## 39    m        6-5 -159.111111 -456.14981  137.927585 8.160043e-01
## 40    m        7-5 -315.000000 -612.03870  -17.961304 2.778753e-02
## 41    m        8-5 -263.888889 -560.92759   33.149807 1.317895e-01
## 42    m        9-5 -236.708333 -542.88881   69.472146 2.994160e-01
## 43    m       10-5 -105.083333 -411.26381  201.097146 9.912727e-01
## 44    m       11-5 -155.333333 -461.51381  150.847146 8.632505e-01
## 45    m       12-5 -340.555556 -637.59425  -43.516859 1.127501e-02
## 46    m        7-6 -155.888889 -452.92759  141.149807 8.349898e-01
## 47    m        8-6 -104.777778 -401.81647  192.260918 9.890943e-01
## 48    m        9-6  -77.597222 -383.77770  228.583258 9.994023e-01
## 49    m       10-6   54.027778 -252.15270  360.208258 9.999830e-01
## 50    m       11-6    3.777778 -302.40270  309.958258 1.000000e+00
## 51    m       12-6 -181.444444 -478.48314  115.594252 6.598402e-01
## 52    m        8-7   51.111111 -245.92759  348.149807 9.999868e-01
## 53    m        9-7   78.291667 -227.88881  384.472146 9.993502e-01
## 54    m       10-7  209.916667  -96.26381  516.097146 4.849922e-01
## 55    m       11-7  159.666667 -146.51381  465.847146 8.406007e-01
## 56    m       12-7  -25.555556 -322.59425  271.483141 1.000000e+00
## 57    m        9-8   27.180556 -278.99992  333.361035 1.000000e+00
## 58    m       10-8  158.805556 -147.37492  464.986035 8.452559e-01
## 59    m       11-8  108.555556 -197.62492  414.736035 9.886365e-01
## 60    m       12-8  -76.666667 -373.70536  220.372029 9.992910e-01
## 61    m       10-9  131.625000 -183.43211  446.682115 9.605881e-01
## 62    m       11-9   81.375000 -233.68211  396.432115 9.992863e-01
## 63    m       12-9 -103.847222 -410.02770  202.333258 9.920825e-01
## 64    m      11-10  -50.250000 -365.30711  264.807115 9.999940e-01
## 65    m      12-10 -235.472222 -541.65270   70.708258 3.070082e-01
## 66    m      12-11 -185.222222 -491.40270  120.958258 6.732661e-01</code></pre>
</div>
</div>
<div id="investigating-by-field" class="section level2">
<h2><span class="header-section-number">3.3</span> Investigating by field</h2>
<p>Across the farm there are three ‘fields’ based on their location. When the bunches are harvested the data for field of origin is also captured. It is interesting to know how each field is performing.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Creating a cum for each month grouped by field</span>
<span class="kw">names</span>(dat)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;    &quot;Field&quot;   &quot;Bunches&quot; &quot;weight&quot;  &quot;month&quot;   &quot;year&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat.sum_m.f &lt;-<span class="st"> </span>
<span class="st">  </span>dat %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(month, year, Field) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">bunches.m.f =</span> <span class="kw">sum</span>(Bunches))</code></pre></div>
<p>As described earlier there are different fields which are picked from. A look at the production of bunches by field in Figure <a href="bananas.html#fig:plotf">3.4</a> highlights the fact the two fields (f102 and f93) were taken out of production.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> dat.sum_m.f, <span class="kw">aes</span>(<span class="dt">x =</span> month, <span class="dt">y =</span> bunches.m.f)) +
<span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) +
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="dt">span =</span> <span class="fl">0.2</span>) +
<span class="st">  </span><span class="kw">scale_x_date</span>(<span class="dt">date_breaks =</span> <span class="st">&quot;12 month&quot;</span>, <span class="dt">date_labels =</span> <span class="st">&quot;%y&quot;</span>) +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">axis.text.x =</span> <span class="kw">element_text</span>(<span class="dt">angle=</span><span class="dv">90</span>, <span class="dt">vjust =</span> <span class="fl">0.5</span>)) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Banana bunches&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>) +
<span class="st">  </span><span class="kw">facet_wrap</span>(~Field, <span class="dt">ncol =</span> <span class="dv">2</span>)</code></pre></div>
<div class="figure"><span id="fig:plotf"></span>
<img src="WASdown_files/figure-html/plotf-1.png" alt="Bar graph showing the sum of banana bunches harvested per month per field with a smooth fitted in blue." width="672" />
<p class="caption">
Figure 3.4: Bar graph showing the sum of banana bunches harvested per month per field with a smooth fitted in blue.
</p>
</div>
<div id="cumulative-bunches-per-field" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Cumulative bunches per field</h3>
<p>It seems interesting to look at a field as a continuous unit and measure the cumulative harvest over time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Creating a cumulative bunches harvest for each field</span>
<span class="kw">names</span>(dat)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;    &quot;Field&quot;   &quot;Bunches&quot; &quot;weight&quot;  &quot;month&quot;   &quot;year&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat.sum_f &lt;-<span class="st"> </span>
<span class="st">  </span>dat %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(Field) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cumsum =</span> <span class="kw">cumsum</span>(Bunches)) %&gt;%
<span class="st">  </span><span class="kw">ungroup</span>()

<span class="kw">str</span>(dat.sum_f)</code></pre></div>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    836 obs. of  7 variables:
##  $ Date   : Date, format: &quot;2007-12-03&quot; &quot;2007-12-10&quot; ...
##  $ Field  : Factor w/ 5 levels &quot;93&quot;,&quot;96&quot;,&quot;101&quot;,..: 4 3 1 2 5 4 1 2 5 3 ...
##  $ Bunches: int  162 134 115 12 145 37 95 13 96 71 ...
##  $ weight : int  990 1800 1494 198 1620 288 882 378 1008 558 ...
##  $ month  : Date, format: &quot;2007-12-01&quot; &quot;2007-12-01&quot; ...
##  $ year   : Date, format: &quot;2007-01-01&quot; &quot;2007-01-01&quot; ...
##  $ cumsum : int  162 134 115 12 145 199 210 25 241 205 ...</code></pre>
<p>In Figure <a href="bananas.html#fig:plot-line">3.5</a> the cumulative number of bunches harvested for each field highlights that they are not all performing the same. We could quickly add a linear model to this to further visualize the trend.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> dat.sum_f, <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> cumsum, <span class="dt">colour =</span> Field)) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="co">#geom_bar(stat = &quot;identity&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;lm&quot;) +</span>
<span class="st">  </span><span class="co">#scale_x_date(date_breaks = &quot;12 month&quot;, date_labels = &quot;%y&quot;) +</span>
<span class="st">  </span><span class="co">#theme(axis.text.x = element_text(angle=90, vjust = 0.5)) +</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Banana bunches&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>) </code></pre></div>
<div class="figure"><span id="fig:plot-line"></span>
<img src="WASdown_files/figure-html/plot-line-1.png" alt="Line graph showing the cumulative harvest for banana bunches per field." width="672" />
<p class="caption">
Figure 3.5: Line graph showing the cumulative harvest for banana bunches per field.
</p>
</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co">#facet_wrap(~Field, ncol = 2)</span></code></pre></div>
</div>
<div id="cumulative-weight-per-field" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Cumulative weight per field</h3>
<p>It seems interesting to look at a field as a continuous unit and measure the cumulative harvest over time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Creating a cumulative bunches harvest for each field</span>
<span class="kw">names</span>(dat)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;    &quot;Field&quot;   &quot;Bunches&quot; &quot;weight&quot;  &quot;month&quot;   &quot;year&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dat.sum_f.w &lt;-<span class="st"> </span>
<span class="st">  </span>dat %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(Field) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cumsum =</span> <span class="kw">cumsum</span>(weight))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dat.sum_f.w)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;    &quot;Field&quot;   &quot;Bunches&quot; &quot;weight&quot;  &quot;month&quot;   &quot;year&quot;    &quot;cumsum&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> dat.sum_f.w, <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> cumsum, <span class="dt">colour =</span> Field)) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="co">#geom_bar(stat = &quot;identity&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;lm&quot;) +</span>
<span class="st">  </span><span class="co">#scale_x_date(date_breaks = &quot;12 month&quot;, date_labels = &quot;%y&quot;) +</span>
<span class="st">  </span><span class="co">#theme(axis.text.x = element_text(angle=90, vjust = 0.5)) +</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Weight (kg)&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>) +
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">400000</span>, <span class="dv">50000</span>)) +
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="WASdown_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co">#facet_wrap(~Field, ncol = 2)</span></code></pre></div>
<p>The awesome thing about this is that you can very easily turn a plot into something more than just a plot using <code>plotly</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#devtools::install_github(&quot;ropensci/plotly&quot;)</span>
<span class="co">#devtools::install_github(&quot;hadley/ggplot2&quot;)</span>
<span class="kw">library</span>(plotly)

bunch &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> dat.sum_f, <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> cumsum, <span class="dt">colour =</span> Field)) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="co">#geom_bar(stat = &quot;identity&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;lm&quot;) + </span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">20000</span>, <span class="dv">5000</span>)) +
<span class="st">  </span><span class="kw">theme_bw</span>() +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span>,
        <span class="dt">legend.justification =</span> <span class="st">&quot;center&quot;</span>,
        <span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) +
<span class="st">  </span><span class="co">#scale_x_date(date_breaks = &quot;12 month&quot;, date_labels = &quot;%y&quot;) +</span>
<span class="st">  </span><span class="co">#theme(axis.text.x = element_text(angle=90, vjust = 0.5)) +</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Number of bunches&quot;</span>, 
       <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>) 
  <span class="co">#facet_wrap(~Field, ncol = 2)</span>

weight &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> dat.sum_f.w, <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> cumsum, <span class="dt">colour =</span> Field)) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="co">#geom_bar(stat = &quot;identity&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;lm&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;loess&quot;, span = 0.1) +</span>
<span class="st">  </span><span class="co">#scale_x_date(date_breaks = &quot;12 month&quot;, date_labels = &quot;%y&quot;) +</span>
<span class="st">  </span><span class="co">#theme(axis.text.x = element_text(angle=90, vjust = 0.5)) +</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Cumulative weight (kg)&quot;</span>, 
       <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>) +
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">400000</span>, <span class="dv">50000</span>)) +
<span class="st">  </span><span class="kw">theme_bw</span>() +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span>,
        <span class="dt">legend.justification =</span> <span class="st">&quot;center&quot;</span>,
        <span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) 
  <span class="co">#facet_wrap(~field, ncol = 2)</span>

<span class="kw">library</span>(gridExtra)
<span class="kw">grid.arrange</span>(bunch, weight, <span class="dt">nrow =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="WASdown_files/figure-html/plotly-1.png" width="90%" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="production-per-hectare" class="section level2">
<h2><span class="header-section-number">3.4</span> Production per hectare</h2>
<p>The fields are not all the same size which we can standardise to a</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span>
<span class="st">  </span>dat %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(Field) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cumsum =</span> <span class="kw">cumsum</span>(weight)) %&gt;%
<span class="st">  </span><span class="kw">ungroup</span>() %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Field =</span> stringr::<span class="kw">str_replace</span>(Field, <span class="st">&quot;93&quot;</span>, <span class="st">&quot;f93&quot;</span>),
         <span class="dt">Field =</span> stringr::<span class="kw">str_replace</span>(Field, <span class="st">&quot;96&quot;</span>, <span class="st">&quot;f96&quot;</span>),
         <span class="dt">Field =</span> stringr::<span class="kw">str_replace</span>(Field, <span class="st">&quot;101&quot;</span>, <span class="st">&quot;f101&quot;</span>),
         <span class="dt">Field =</span> stringr::<span class="kw">str_replace</span>(Field, <span class="st">&quot;1011&quot;</span>, <span class="st">&quot;f1011&quot;</span>),
         <span class="dt">Field =</span> stringr::<span class="kw">str_replace</span>(Field, <span class="st">&quot;102&quot;</span>, <span class="st">&quot;f102&quot;</span>)) %&gt;%
<span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> Field, <span class="dt">value =</span> cumsum) %&gt;%
<span class="st">  </span><span class="kw">group_by</span>(month) %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">ha.93 =</span> f93 /<span class="fl">1.51</span>,
         <span class="dt">ha.96 =</span> f96 /<span class="fl">1.31</span>,
         <span class="dt">ha.101 =</span> f101/<span class="fl">2.07</span>,
         <span class="dt">ha.1011 =</span> ff1011/<span class="fl">2.21</span>,
         <span class="dt">ha.102 =</span> f102/<span class="fl">1.12</span>) 

dat.v2 &lt;-
<span class="st">  </span>data %&gt;%
<span class="st">  </span><span class="kw">select</span>(month, ha<span class="fl">.93</span>, ha<span class="fl">.96</span>, ha<span class="fl">.101</span>, ha<span class="fl">.1011</span>, ha<span class="fl">.102</span>) %&gt;%
<span class="st">  </span><span class="kw">gather</span>(Field, Weight, <span class="dv">2</span>:<span class="dv">6</span>)%&gt;%
<span class="st">  </span><span class="kw">drop_na</span>()</code></pre></div>
<p>I want to put the plot for per hectare side by side to the weight per field. I may need to adjust the level of factors.</p>
<p>PROBLEM - I DONT KNOW HOW!!!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(dat.v2)</code></pre></div>
<pre><code>## [1] &quot;month&quot;  &quot;Field&quot;  &quot;Weight&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> dat.v2, <span class="kw">aes</span>(<span class="dt">x =</span> month, <span class="dt">y =</span> Weight, <span class="dt">colour =</span> Field)) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="co">#geom_bar(stat = &quot;identity&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;lm&quot;) +</span>
<span class="st">  </span><span class="co">#scale_x_date(date_breaks = &quot;12 month&quot;, date_labels = &quot;%y&quot;) +</span>
<span class="st">  </span><span class="co">#theme(axis.text.x = element_text(angle=90, vjust = 0.5)) +</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Weight (kg)&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>) +
<span class="st">  </span><span class="co">#scale_y_continuous(breaks = seq(0, 400000, 50000)) +</span>
<span class="st">  </span><span class="kw">theme_bw</span>()</code></pre></div>
<p><img src="WASdown_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="co">#facet_wrap(~Field, ncol = 2)</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#devtools::install_github(&quot;ropensci/plotly&quot;)</span>
<span class="co">#devtools::install_github(&quot;hadley/ggplot2&quot;)</span>
<span class="kw">library</span>(plotly)

area &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> dat.v2, <span class="kw">aes</span>(<span class="dt">x =</span> month, <span class="dt">y =</span> Weight, <span class="dt">colour =</span> Field)) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="co">#geom_bar(stat = &quot;identity&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;lm&quot;) +</span>
<span class="st">  </span><span class="co">#scale_x_date(date_breaks = &quot;12 month&quot;, date_labels = &quot;%y&quot;) +</span>
<span class="st">  </span><span class="co">#theme(axis.text.x = element_text(angle=90, vjust = 0.5)) +</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Production per hectare&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>) +
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">180000</span>), 
                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">180000</span>, <span class="dv">20000</span>)) +
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;A&quot;</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme_bw</span>() +
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;A&quot;</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span>,
        <span class="dt">legend.justification =</span> <span class="st">&quot;center&quot;</span>,
        <span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) 
  <span class="co">#facet_wrap(~Field, ncol = 2)</span>

weight &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> dat.sum_f.w, <span class="kw">aes</span>(<span class="dt">x =</span> Date, <span class="dt">y =</span> cumsum, <span class="dt">colour =</span> Field)) +
<span class="st">  </span><span class="kw">geom_line</span>() +
<span class="st">  </span><span class="co">#geom_bar(stat = &quot;identity&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;lm&quot;) +</span>
<span class="st">  </span><span class="co">#geom_smooth(method = &quot;loess&quot;, span = 0.1) +</span>
<span class="st">  </span><span class="co">#scale_x_date(date_breaks = &quot;12 month&quot;, date_labels = &quot;%y&quot;) +</span>
<span class="st">  </span><span class="co">#theme(axis.text.x = element_text(angle=90, vjust = 0.5)) +</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&quot;Cumulative weight (kg)&quot;</span>, 
       <span class="dt">x =</span> <span class="st">&quot;Year&quot;</span>) +
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">300000</span>), 
                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">300000</span>, <span class="dv">50000</span>)) +
<span class="st">  </span><span class="kw">theme_bw</span>() +
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;B&quot;</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.direction =</span> <span class="st">&quot;horizontal&quot;</span>,
        <span class="dt">legend.justification =</span> <span class="st">&quot;center&quot;</span>,
        <span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>) 
  <span class="co">#facet_wrap(~field, ncol = 2)</span>

<span class="kw">library</span>(gridExtra)
<span class="kw">grid.arrange</span>(area, weight, <span class="dt">nrow =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="WASdown_files/figure-html/unnamed-chunk-31-1.png" width="90%" style="display: block; margin: auto;" /></p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-lubridate">
<p>Grolemund, Garrett, Vitalie Spinu, and Hadley Wickham. 2016. <em>Lubridate: Make Dealing with Dates a Little Easier</em>. <a href="https://CRAN.R-project.org/package=lubridate" class="uri">https://CRAN.R-project.org/package=lubridate</a>.</p>
</div>
<div id="ref-R-dplyr">
<p>Wickham, Hadley, Romain Francois, Lionel Henry, and Kirill Müller. 2017. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr" class="uri">https://CRAN.R-project.org/package=dplyr</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="petrol.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="final-words.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-bananas.Rmd",
"text": "Edit"
},
"download": ["WASdown.pdf", "WASdown.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
